\chapter{Introduction}
\label{chap-introduction}

Wireless sensor networks composed of tens or hundreds of low-power,
resource-constrained devices, can aid scientific exploration by providing
high-fidelity data at scales more difficult to achieve with traditional
instrumentation. In his book \textit{The Macroscope}, French futurist Joel de
Rosnay envisioned a new scientific instrument: the \textit{macroscope}. As a
large-scale analog to the microscope, the macroscope would be able to provide
insights into large systems that are difficult to study at scale: entire
cities, ecosystems, or planetary-scale systems.

Realizing the scientific macroscope using sensor network technology requires
confronting several core challenges. Data collected by the system must be
able to match the fidelity of signals collected from higher-power
instruments. When resource limitations limit the amount of data that can be
collected, the system should focus its limited energy or bandwidth on the
highest value signals. The network should continuously adapt to the resource
limitations inherent to sensor network technology and gracefully adjust as
energy and bandwidth availability fluctuate.

This dissertation presents the design of a scientific macroscope using
wireless sensor networks as an enabling technology, as well as two
architectural solutions designed to improve the sensor macroscope's
performance by managing distributed network resources. In this dissertation,
we first validate that data collected by wireless sensor nodes can meet the
needs of a demanding, high data-rate scientific application: volcano
monitoring. We then describe new sensor network architectures that improve
the data quality provided to the application by the sensor macroscope.
Together these techniques begin the process of realizing de Rosnay's vision
using embedded sensing.

\section{Wireless Sensor Networks}

Wireless sensor networks consist of nodes integrating modest amounts of
computation, storage, and communication capabilities. The use of low-power
microprocessors, radios, and MEMS sensors enables embedded sensing on power
budgets not feasible a decade ago.

An example of a representative device is the TMote Sky~\cite{moteiv}. The
TMote is a descendant of the original UC Berkeley Mica ``mote'' sensor node.
It integrates a Texas Instruments MSP430 microcontroller, 48~kB of program
memory, 10~kB of SRAM, 1~MB of external flash memory and a 2.4~GHz Chipcon
IEEE 802.15.4 radio. The MSP430 is a 16~bit microcontroller running at 4~MHz.
It is a popular basis for wireless sensor network nodes due to its many
reconfigurable ports and low power consumption. The MSP430 consumes
approximately 2~mA of current while active and can enter sleeps states
consuming only microamps.

The CC2420 is a low-power 802.15.4 radio with a raw data rate of 250~kbps. On
the TMote Sky in practice this is reduced considerably by the overheads
necessary to enable medium access control and the limitations of the SPI bus.
The CC2420 consumes roughly 20~mA of current during both send and receive
mode but can quickly enter and leave a low-power sleep state, which enables
channel-polling and other kinds of low-power operation.

Due to their low power budgets, sensor nodes can be designed to be
lightweight and easy to deploy. We found it possible to power a TMote Sky for
several weeks using a pair of D-cell batteries, and this was without
attempting to duty cycle the radio, which is the largest consumer of energy
on the device. Doing so could have allowed us to increase the node lifetime
considerably. Another option would be to deploy nodes with energy-harvesting
capabilities. Due to their low power consumption, even a small solar panel
may be able to allow a TMote to run continuously, depending on assumptions
made about available sunlight and the efficiency of the energy capture and
storage circuitry.

\section{Sensor Networks for Science: Architectural Challenges}

Wireless sensor nodes can improve on existing instrumentation in several
ways. In certain cases low-power embedded nodes can replicate functionality
now performed by larger, heavier devices. This provides a direct benefit to
scientists, as it reduces the amount of equipment that must be transported
and speeds deployment times. In addition, sensor networks come with telemetry
``built in'', and this can also provide a significant benefit when the
instrumentation that is replaced was untelemetered. Continuous communication
with deployed sensors during the experiment allows scientists to begin to
process data, assess the health of the network, or make adjustments on the
fly. In other cases, embedded sensing provides occupies a different set of
tradeoffs between the ease of deployment and the sensing capability of each
device. If, for the same amount of deployment effort and cost, a researcher
can deploy either a small set of extremely accurate sensors or a much larger
array of less accurate sensors, it is likely that either choice will provide
the best tradeoff for a certain set of applications.

Early sensor network researchers saw the potential for these new devices to
aid in scientific studies. One of the first published deployments of embedded
sensing technology was on Great Duck Island in Maine, where a network of 32
sensor nodes was used to study the nesting behavior of a colony of
Seabirds~\cite{gdi-sensys04}. Another early experiment used similar nodes to
study the microclimate of a single Redwood tree~\cite{berkeley-redwoods}.  In
contrast to these early efforts, our group has focused on \textit{high
data-rate} scientific applications. Compared with low data-rate monitoring,
these produce a distinct set of research challenges.

\begin{itemize}

\item \textbf{Data fidelity.} High data-rates stress the ability of the
system to provide high fidelity data. Sampling at high rates introduces
additional load on each node, which can interfere with its participation in
routing, time synchronization, or data transfer protocols. Frequently, timing
accuracy requirements scale with the sampling rate, so that data sampled at
high rates must be assigned precise timestamps to facilitate comparisons
between multiple stations.

\textit{Problem Statement:} Given a target application, build and validate a
system that can provide data of fidelity sufficient to meet the scientific
goals.

\item \textbf{Optimizing overall data quality.} In addition, high sampling
rates challenge the ability of the system to achieve low-power operation.
Sampling, storing, and transmitting large amounts of data prevents nodes from
entering into low-power states and can consume a great deal of their stored
energy. Once data rates and network sizes pass a certain point, all data
cannot be collected in real time, meaning that the system must choose what
data to discard and what to retrieve. Depending on the phenomena being
monitored, some data is likely to be interesting and some less interesting. A
habitat monitoring application may want to focus on collecting vocalizations
from a certain kind of animal. Differences in sensor quality may also lead to
data value disparities, when poorly-located or poorly-functioning sensors
sample data that is of poor quality and of little value to the application.

\textit{Problem Statement:} When all the data sampled cannot be collected due
to energy or bandwidth constraints, ensure that the data that is retrieved is
the most valuable to the application.

\item \textbf{Network-wide energy disparities.} When energy-harvesting
technologies are deployed, variances in energy availability across the
network can challenge the ability of the entire system to achieve good
performance. Many sensor network protocols may concentrate energy usage on a
small set of nodes, leading to poor network performance if and when those
nodes batteries are exhausted. Enabling good performance of the network as a
whole requires adapting to variance in resource availability as it happens,
and adjusting network behavior in ways that allow nodes with large amounts of
energy to take on new roles and nodes with low batteries to reduce their
responsibilities.

\textit{Problem Statement:} When disparities in energy availability emerge
due to difference in load and charging rates at different nodes, adjust the
network's behavior to tune the consumption of energy based on the
application's goals.

\end{itemize}

When tackling these challenges, our approach has been inspired by our vision
of a set of sensor nodes functioning \textit{as a single instrument}. We have
tried to design architectures that abandon a node-level view in favor of this
network-level perspective. This challenges the way that many sensor network
protocols are designed, since they assume that greedy local decision making
will produce node behaviors that are beneficial for the entire system.
Instead, the two architectures described in this dissertation attempt to
connect local node behaviors with the resulting value of the entire
instrument to the intended scientific application.

\section{Dissertation Summary and Contributions}

This dissertation makes the following contributions:

\begin{itemize}

\item \textbf{Detailed evaluation of a scientific macroscope.} We have built
and fielded the first sensor network designed to study active volcanos. After
an initial pilot deployment, a system was designed giving careful
consideration to the scientific requirements. In total, we have performed
three deployments of iterations of our system at active volcanoes in Ecuador.
All three are summarized below:

\begin{enumerate}

\item \textbf{July, 2004, Tungurahua volcano:} We deployed three infrasonic
monitoring nodes continuously transmitting at 102~Hz to a central aggregator
node, which relayed the data over a wireless link to the observatory
approximately 9~km away. Our network was active from July 20--22, 2004, and
collected over 54~hours of infrasonic signals.

\item \textbf{August, 2005, Reventador volcano:} This deployment featured a
larger, more capable network consisting of sixteen nodes fitted with
seismoacoustic sensors deployed in a 3~km linear array. Collected data was
routed over a multi-hop network and over a long-distance radio link to a
logging laptop located at the observatory 9~km away from deployment site.
Over three weeks the network captured 230 volcanic events.

\item \textbf{July, 2007, Tungurahua volcano:} We returned to Tungurahua
Volcano in 2007 and deployed eight sensor nodes in order to test Lance, a
framework for optimizing high-resolution signal collection. The network was
operational for a total of 71~hours, during which time we downloaded 77~MB of
raw data.

\end{enumerate}

Following our 2005 deployment we took a hard look at the performance of our
system from the perspective of our seismology collaborators. Rather than
dwelling on metrics of interest to computer scientists, we attempted to
address the core aspects of the system that would help drive scientific
adoption. We identified two core concerns: data \textit{fidelity},
encompassing the quality and accuracy of the collected data; and
\textit{yield}, measuring the amount of data that the system could
successfully retrieve.

We conducted a rigorous examination of our 2005 deployment along these lines.
A unique challenge arose when attempting to assign timing information to our
data to allow it to be used for scientific analysis, and this led to the
development of a novel time rectification approach. This new technique was
able to correct timing protocol failures during our field deployment and
allow us to accurately assign timestamps to almost all of the data our
network collected.

\item \textbf{Architecture optimizing data quality.} Given limited batteries
and low-bandwidth links, sensor networks must carefully manage resource
usage, particularly with an eye to how these decisions impact the quality of
the data provided to the application. Many sensor networks attempt to balance
the cost and utility of actions taken by the network, but do so in ad-hoc
ways embedded in application-specific logic.

Lance provide an architectural solution to the problem of optimizing reliable
data collection for high data-rate sensor network applications. Lance is
based on two observations that emerged during the evaluation of our 2005
volcano deployment. First, given the low-bandwidth of sensor network radios,
even with a moderately-sized network it was not possible to reliable extract
all the data the nodes were collecting. Given the inevitability of data loss,
Lance attempts to ensure that the subset of data that was downloaded provides
the highest value to the application.

Second, given the high power consumption of sensor network radios, the energy
consumption associated with reliable data collection was the dominant source
of discretionary energy usage in our deployed network. Thus, attempting to
ensure that all nodes met a target lifetime required consideration of the
distributed energy impact of multihop reliable data transfer. Lance attempts
to balance the cost of downloading data against the value of that data to the
application. We were able to develop a simple heuristic for selecting which
data to download that delivers near-optimal performance under a range of
constraints and network properties.

\item \textbf{Service for collaborative distributed energy management.} While
Lance demonstrated the improvements in performance achievable by adjusting
network behavior to meet energy availability, it was limited in several
respects. First, Lance relies on a centralized controller. Since the overhead
of centralized control scales badly as the network size grows, this limits
the applicability of this approach. Second, Lance's only way of effecting
energy usage is in the choice of what data to retrieve from the network. This
is appropriate for high data-rate networks where data download is the primary
source of energy consumption, but not for networks where this is not the
case.

IDEA (Integrated Distributed Energy Awareness) is a sensor network service
designed to provide the benefits of energy awareness to all sensor network
components in a distributed fashion. IDEA distributes information about each
node's energy load and charging rates and provides intelligence that assists
components in adjusting their own state in ways beneficial to the target
application.

\end{itemize}

\section{Dissertation Road Map}

The remainder of this dissertation is organized as follows. The next chapter
(Chapter~\ref{chapter-related}) introduces sensor networks for volcano
monitoring, a high data-rate application that we have studied in detail and
which has motivated the architectural contributions outlined in this
dissertation; it also presents related efforts aimed at building scientific
sensor macroscopes using sensor network technology.

Chapter~\ref{chapter-evaluation} presents the design and a detailed
evaluation of a sensor network system built to study active volcanos.
Chapters~\ref{chapter-lance} and \ref{chapter-idea} presents Lance and IDEA,
two architectural approaches tackling problems emerging from our field
deployments. Lance is designed to optimize the output data quality of the
macroscope given constraint on bandwidth and energy, while IDEA aims to
improve the performance of the macroscope by enabling collaborative
management of distributed energy resources within the instrument.

Finally, Chapter~\ref{chapter-lessons} presents lessons learned in the course
of building these systems and presents opportunities for future work, and
Chapter~\ref{chapter-conclusion} concludes.

